{"version":3,"file":"static/webpack/static/development/pages/index.js.8716357e3c380706a732.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import Layout from '../components/layout'\nimport {Radio} from 'antd'\nimport {checkProjects,historys} from '../utils/config'\nimport moment from \"moment\"\nimport Axios from 'axios';\nexport default class extends React.Component {\n  static async getInitialProps({ req,query,jsonPageRes }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent,query,jsonPageRes }\n  }\n  state = {\n    name:\"\",\n    sex:1,\n    age:0,\n    phone:\"\",\n    appointment_date:\"\",\n    time_bucket:1,\n    check_project:1,\n    check_project_lable:\"\",\n    check_method:1,\n    history:1,\n    allergy_history:\"\",\n    history_lable:\"\",\n    remark:\"\",\n    is70:false\n  }\n\n  async loadList(tp){\n    \n  }\n\n  async componentDidMount(){\n    \n  }\n  choiceDate(){\n    let self = this\n    weui.datePicker({\n      start: new Date(moment().add(1, 'days')), // 从今天开始\n      end: 2030,\n      // defaultValue: [2020, 6, 9],\n      onChange: function(result){\n          //console.log(result);\n      },\n      onConfirm: function(result){\n          //console.log(11122,result);\n          if (result[1].value < 10){\n            result[1].value = `0${result[1].value}`\n          }\n          if (result[2].value < 10){\n            result[2].value = `0${result[2].value}`\n          }\n          self.setState({appointment_date:result[0].value+\"-\"+result[1].value+\"-\"+result[2].value})\n      },\n      id: 'datePicker'\n    });\n  }\n\n  checkProJect(){\n    let self = this\n    weui.picker(checkProjects, {\n         className: 'custom-classname',\n         container: 'body',\n         defaultValue: [1],\n         onChange: function (result) {\n\n         },\n         onConfirm: function (result) {\n             let is70 = false\n             if (result[0].value == 5 || result[0].value == 6){\n                is70 = true\n             }\n             self.setState({check_project_lable:result[0].label,check_project:result[0].value,is70,check_method:is70 ? 1:self.state.check_method})\n         },\n         id: 'checkProJect'\n      });\n  }\n\n  choiceAllergyHistory(){\n    let self = this\n    weui.picker(historys, {\n         className: 'custom-classname',\n         container: 'body',\n         defaultValue: [1],\n         onChange: function (result) {\n\n         },\n         onConfirm: function (result) {\n             self.setState({history_lable:result[0].label,history:result[0].value})\n         },\n         id: 'historys'\n      });\n  }\n\n  choiceAge(){\n    let self = this\n    let ages = []\n    for(let i=1;i<=100;i++){\n      ages.push({label:i + \"岁\",value: i})\n    }\n    weui.picker(ages, {\n         className: 'custom-classname',\n         container: 'body',\n         defaultValue: [40],\n         onChange: function (result) {\n\n         },\n         onConfirm: function (result) {\n            let is70 = false\n            if(result[0].value >= 70){\n              is70 = true\n            }\n            self.setState({age:result[0].value,is70,check_method:is70 ? 1:self.state.check_method})\n         },\n         id: 'historys'\n    });\n  }\n\n  async subMit(){\n    let {name,sex,age,phone,appointment_date,time_bucket,check_project,check_method,history,allergy_history,remark,check_project_lable,history_lable} = this.state;\n    if(name == \"\"){\n      alert(\"请输入姓名\")\n      return;\n    }\n    if(age <= 0){\n      alert(\"请选择年龄\")\n      return;\n    }\n    if(appointment_date == \"\"){\n      alert(\"请选择预约时间\")\n      return;\n    }\n    if(phone.length != 11 || isNaN(parseInt(phone))){\n      alert(\"请输入正确手机号\")\n      return;\n    }\n    document.getElementById(\"loadingToast\").style.display = \"block\"\n    let res = await Axios.post(\"http://momoman.cn/jg/appointment/create\",this.state)\n    if(res.status == 200){\n      if(check_project == 1){\n        location.href = \"https://mp.weixin.qq.com/s/v5ERTA7B3aXjecPVMzrYNA\"\n     }\n     if(check_project == 2){\n       location.href = \"https://mp.weixin.qq.com/s/-ZYzj-0Hcd2pfCggIGJuBA\"\n     }\n     if(check_project == 3){\n       location.href = \"https://mp.weixin.qq.com/s/8eqSfuNofulXk41qb1dCeA\"\n     }\n     if(check_project == 4){\n       location.href = \"https://mp.weixin.qq.com/s/I7CLWUt7Y2cf7v609Vu7mA\"\n     }\n     if(check_project == 5){\n       location.href = \"https://mp.weixin.qq.com/s/LFMbVZSwsoEhUBQCQO0oCg\"\n     }\n     if(check_project == 6){\n       location.href = \"https://mp.weixin.qq.com/s/fvy8cGmH-nrIrfpsTt_iyA\"\n     }\n     document.getElementById(\"loadingToast\").style.display = \"none\"\n     document.getElementById(\"toast\").style.display = \"block\"\n    }else{\n      alert(\"预约失败，请检查填写项\")\n    }\n    \n  }\n\n  render() {\n    let {name,sex,age,phone,appointment_date,time_bucket,check_project,check_method,history,allergy_history,remark,check_project_lable,history_lable,is70} = this.state;\n    return (\n      <Layout>\n        <div>\n          <div id=\"loadingToast\" style={{display: \"none\"}}>\n            <div className=\"weui-mask_transparent\"></div>\n            <div className=\"weui-toast\">\n                <i className=\"weui-loading weui-icon_toast\"></i>\n                <p className=\"weui-toast__content\">预约中</p>\n            </div>\n          </div>\n          <div id=\"toast\" style={{display: \"none\"}}>\n              <div className=\"weui-mask_transparent\"></div>\n              <div className=\"weui-toast\">\n                  <i className=\"weui-icon-success-no-circle weui-icon_toast\"></i>\n                  <p className=\"weui-toast__content\">预约成功</p>\n              </div>\n          </div>\n          <div style={{height:5}}></div>\n          <div className=\"weui-cells__group weui-cells__group_form\">\n            <div className=\"weui-cells__title\">请填写预约信息</div>\n            <div className=\"weui-cells weui-cells_form\">\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">姓名</label></div>\n                <div className=\"weui-cell__bd\">\n                    <input id=\"js_input\" value={name} onChange={(e)=>{\n                        this.setState({name:e.target.value})\n                    }} className=\"weui-input\" placeholder=\"请填写姓名\" />\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">性别</label></div>\n                <div className=\"weui-cell__bd\">\n                <Radio.Group onChange={(e)=>{this.setState({sex:e.target.value})}} value={sex}>\n                  <Radio value={1}>男</Radio>\n                  <Radio value={2}>女</Radio>\n                </Radio.Group>\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">年龄</label></div>\n                <div className=\"weui-cell__bd\" onClick={this.choiceAge.bind(this)} id=\"ages\">\n                    <input className=\"weui-input\" value={age != 0 ? age + \"岁\":\"\"} disabled={true} placeholder=\"请选择年龄\" type=\"text\" />\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">手机</label></div>\n                <div className=\"weui-cell__bd\">\n                    <input className=\"weui-input\" value={phone} onChange={(e)=>{\n                      this.setState({ phone: e.target.value })  \n                    }} placeholder=\"请填写联系电话\" type=\"number\" pattern=\"[0-9]*\" />\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">预约时间</label></div>\n                <div id=\"datePicker\" onClick={this.choiceDate.bind(this)}>\n                    <input className=\"weui-input\" disabled={true} value={appointment_date} placeholder=\"请选择预约时间\" type=\"text\" />\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">时间段</label></div>\n                <div className=\"weui-cell__bd\">\n                <Radio.Group onChange={(e)=>{\n                    this.setState({ time_bucket: e.target.value })\n                }} value={time_bucket}>\n                  <Radio value={1}>上午</Radio>\n                  <Radio value={2}>下午</Radio>\n                </Radio.Group>\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">检查项目</label></div>\n                <div className=\"weui-cell__bd\" id=\"checkProJect\" onClick = { this.checkProJect.bind(this)}>\n                  <input className=\"weui-input\" disabled={true} value={check_project_lable} placeholder=\"请选择检查项目\" type=\"text\" />\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">检查方式</label></div>\n                <div className=\"weui-cell__bd\">\n                <Radio.Group onChange={(e)=>{\n                  this.setState({ check_method: e.target.value })\n                }} value={check_method}>\n                  <Radio value={1}>普通</Radio>\n                  <Radio value={2} disabled={is70}>无痛</Radio>\n                </Radio.Group>\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">既往病史</label></div>\n                <div className=\"weui-cell__bd\" id=\"historys\">\n                  <input className=\"weui-input\" onChange={(e)=>{\n                    this.setState({history: e.target.value})\n                  }} value={history_lable} placeholder=\"请选择既往病史\" type=\"text\" />\n                </div>\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__hd\"><label className=\"weui-label\">药物过敏史</label></div>\n                <input className=\"weui-input\" value={allergy_history} onChange={(e)=>{\n                  this.setState({ allergy_history: e.target.value})\n                }} placeholder=\"如有请填写\" type=\"text\" />\n              </div>\n              <div className=\"weui-cell\">\n                <div className=\"weui-cell__bd\">\n                    <textarea className=\"weui-textarea\" value={remark} onChange={(e)=>{\n                      this.setState({ remark: e.target.value}) \n                    }} placeholder=\"备注\" rows=\"3\"></textarea>\n                </div>\n              </div>\n              <div style={{height:5}}></div>\n              <a href=\"javascript:;\" onClick={this.subMit.bind(this)} className=\"weui-btn weui-btn_primary\">提交预约申请</a>\n              <div style={{height:15}}></div>\n            </div>\n          </div>\n        </div>\n      </Layout>\n\n    )\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;;;;;;;;;AAgBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAjBA;AAmBA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAdA;AAgBA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAVA;AAYA;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAdA;AAgBA;;;;;;;;;;;;;AAGA;AACA;AAAA;;;;;AACA;;;;AAGA;;;;;AACA;;;;AAGA;;;;;AACA;;;;AAGA;;;;;AACA;;;;AAGA;;AACA;AACA;;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAGA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;;;;;;;;;AApRA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAJA;AACA;;;;;A","sourceRoot":""}