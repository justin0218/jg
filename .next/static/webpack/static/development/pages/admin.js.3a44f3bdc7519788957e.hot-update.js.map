{"version":3,"file":"static/webpack/static/development/pages/admin.js.3a44f3bdc7519788957e.hot-update.js","sources":["webpack:///./pages/admin.js"],"sourcesContent":["import Layout from '../components/layout'\nimport {Radio,Table,Input,Button,Select,DatePicker} from 'antd'\nimport {checkProjects,historys} from '../utils/config'\nimport moment from \"moment\"\nimport Axios from 'axios';\nimport queryString from 'query-string';\nconst { Option } = Select;\nexport default class extends React.Component {\n  static async getInitialProps({ req,query,jsonPageRes }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent,query,jsonPageRes }\n  }\n  state = {\n    loading:true,\n    data:{\n      list:[]\n    },\n    searchs:{\n      name:\"\",\n      sex:0,\n      page:1,\n      time_bucket:0,\n      check_method:0,\n      phone:\"\",\n      appointment_date:\"\"\n    }\n  }\n\n  async loadList(serachParam){\n    this.setState({loading:true})\n    let res = await Axios.get(`http://localhost:29001/jg/appointment/list?${queryString.stringify(serachParam)}`)\n    console.log(res);\n    this.setState({data:res.data,loading:false})\n  }\n\n  async componentDidMount(){\n     await this.loadList();\n  }\n \n\n\n \n\n  render() {\n    let {data,searchs,loading} = this.state;\n    const columns = [\n      {\n        title: '姓名',\n        dataIndex: 'name',\n        key: 'name',\n      },\n      {\n        title: '性别',\n        dataIndex: 'sex',\n        key: 'sex',\n        render:(a,b,c)=>{\n          return <span>{b.sex == 1 ? \"男\":\"女\"}</span>\n        }\n      },\n      {\n        title: '年龄',\n        dataIndex: 'age',\n        key: 'age',\n        render:(a,b,c)=>{\n          return <span>{b.age}岁</span>\n        }\n      },\n      {\n        title: '手机号',\n        dataIndex: 'phone',\n        key: 'phone',\n      },\n      {\n        title: '预约时间',\n        dataIndex: 'appointment_date',\n        key: 'appointment_date',\n        render:(a,b,c)=>{\n           return <span>{b.appointment_date} {b.time_bucket == 1 ? \"上午\":\"下午\"}</span>\n        }\n      },\n      {\n        title: '检查项目',\n        dataIndex: 'check_project',\n        key: 'check_project',\n        render:(a,b,c)=>{\n           return <span>{checkProjects.find((v)=>{return v.value == b.check_project}).label}</span>\n        }\n      },\n      {\n        title: '检查方式',\n        dataIndex: 'check_method',\n        key: 'check_method',\n        render:(a,b,c)=>{\n           return <span>{b.check_method == 1 ? \"普通\":\"无痛\"}</span>\n        }\n      },\n      {\n        title: '既往史',\n        dataIndex: 'history',\n        key: 'history',\n        render:(a,b,c)=>{\n           return <span>{historys.find((v)=>{return v.value == b.history}).label}</span>\n        }\n      },\n      {\n        title: '过敏史',\n        dataIndex: 'allergy_history',\n        key: 'allergy_history'\n      },\n      {\n        title: '备注',\n        dataIndex: 'remark',\n        key: 'remark'\n      },\n      {\n        title: '创建时间',\n        dataIndex: 'create_time',\n        key: 'create_time',\n        render:(a,b,c)=>{\n           return <span>{moment(b.create_time).format(\"YYYY-MM-DD HH:mm:ss\")}</span>\n        }\n      }\n      \n      \n    ];\n    return (\n      <div>\n        <div style={{height:15}}></div>\n          &nbsp;&nbsp; \n          <Input placeholder=\"姓名\" style={{width:200}} value={searchs.name} onChange={(e)=>{\n            searchs.name = e.target.value;\n            this.setState({searchs})\n          }} />\n          &nbsp;&nbsp;\n          <Input placeholder=\"手机号\" style={{width:200}} value={searchs.phone} onChange={(e)=>{\n            searchs.phone = e.target.value;\n            this.setState({searchs})\n          }} />\n          &nbsp;&nbsp;\n          <DatePicker style={{width:200}} placeholder=\"预约日期\" onChange={(date, dateString)=>{\n              searchs.appointment_date = dateString;\n              this.setState({searchs})\n          }} />\n          &nbsp;&nbsp;\n          <Select defaultValue={0} placeholder=\"性别\" style={{ width: 120 }} onChange={(v)=>{\n              searchs.sex = v;\n              this.setState({searchs})\n          }}>\n            <Option value={0}>全部性别</Option>\n            <Option value={1}>男</Option>\n            <Option value={2}>女</Option>\n          </Select>\n          &nbsp;&nbsp; \n          <Select defaultValue={0} style={{ width: 120 }} onChange={(v)=>{\n              searchs.time_bucket = v;\n              this.setState({searchs})\n          }}>\n            <Option value={0}>全部时间段</Option>\n            <Option value={1}>上午</Option>\n            <Option value={2}>下午</Option>\n          </Select>\n          &nbsp;&nbsp; \n          <Select defaultValue={0} style={{ width: 120 }} onChange={(v)=>{\n              searchs.check_method = v;\n              this.setState({searchs})\n          }}>\n            <Option value={0}>全部检查方式</Option>\n            <Option value={1}>普通</Option>\n            <Option value={2}>无痛</Option>\n          </Select>\n          &nbsp;&nbsp;\n          <Select defaultValue={0} style={{ width: 120 }} onChange={(v)=>{\n              searchs.check_project = v;\n              this.setState({searchs})\n          }}>\n            <Option value={0}>全部检查项目</Option>\n            {\n              checkProjects.map((v,k)=>(\n                <Option key={k} value={v.value}>{v.label}</Option>\n              ))\n            }\n          </Select>\n          &nbsp;&nbsp;\n          <Button onClick={async ()=>{\n            let {searchs} = this.state;\n            searchs.page = 1\n            await this.loadList(searchs)\n          }}>搜索</Button>\n        <div style={{height:15}}></div>\n        <Table rowKey={`id`} pagination={{\n            pageSize:data.size,\n            total:data.total,\n            current:searchs.page,\n            onChange:async (page)=>{\n              let {searchs} = this.state;\n              searchs.page = page\n              await this.loadList(searchs)\n            }\n        }} dataSource={data.list} loading={loading} columns={columns} />\n      </div>\n      \n    )\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AALA;AACA;;;;;;;;;AAeA;;;;;;AACA;AAAA;AAAA;;AACA;AACA;;AADA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;;;;;;;;;;;;;;;;;AAMA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AASA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AASA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;AAWA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAJA;AASA;AAAA;AAAA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;;;;;;;;;;;;AAlMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAJA;AACA;;;;;A","sourceRoot":""}