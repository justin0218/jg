{"ast":null,"code":"import \"antd/lib/table/style/css\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/date-picker/style/css\";\nimport _DatePicker from \"antd/lib/date-picker\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"antd/lib/select/style/css\";\nimport _Select from \"antd/lib/select\";\nvar _jsxFileName = \"/Users/justin/Desktop/private/admin_jg/pages/admin.js\";\nimport React from \"react\";\nimport Layout from '../components/layout';\nimport { checkProjects, historys } from '../utils/config';\nimport moment from \"moment\";\nimport Axios from 'axios';\nimport queryString from 'query-string';\nvar Option = _Select.Option;\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_default)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      loading: true,\n      data: {\n        list: []\n      },\n      searchs: {\n        name: \"\",\n        sex: 0,\n        page: 1,\n        time_bucket: 0,\n        check_method: 0,\n        phone: \"\",\n        appointment_date: \"\"\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"loadList\",\n    value: function () {\n      var _loadList = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(serachParam) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setState({\n                  loading: true\n                });\n                _context.next = 3;\n                return Axios.get(\"http://localhost:29001/jg/appointment/list?\".concat(queryString.stringify(serachParam)));\n\n              case 3:\n                res = _context.sent;\n                console.log(res);\n                this.setState({\n                  data: res.data,\n                  loading: false\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadList(_x) {\n        return _loadList.apply(this, arguments);\n      }\n\n      return loadList;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.loadList();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          data = _this$state.data,\n          searchs = _this$state.searchs,\n          loading = _this$state.loading;\n      var columns = [{\n        title: '姓名',\n        dataIndex: 'name',\n        key: 'name'\n      }, {\n        title: '性别',\n        dataIndex: 'sex',\n        key: 'sex',\n        render: function render(a, b, c) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }, b.sex == 1 ? \"男\" : \"女\");\n        }\n      }, {\n        title: '年龄',\n        dataIndex: 'age',\n        key: 'age',\n        render: function render(a, b, c) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            },\n            __self: this\n          }, b.age, \"\\u5C81\");\n        }\n      }, {\n        title: '手机号',\n        dataIndex: 'phone',\n        key: 'phone'\n      }, {\n        title: '预约时间',\n        dataIndex: 'appointment_date',\n        key: 'appointment_date',\n        render: function render(a, b, c) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }, b.appointment_date, \" \", b.time_bucket == 1 ? \"上午\" : \"下午\");\n        }\n      }, {\n        title: '检查项目',\n        dataIndex: 'check_project',\n        key: 'check_project',\n        render: function render(a, b, c) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }, checkProjects.find(function (v) {\n            return v.value == b.check_project;\n          }).label);\n        }\n      }, {\n        title: '检查方式',\n        dataIndex: 'check_method',\n        key: 'check_method',\n        render: function render(a, b, c) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }, b.check_method == 1 ? \"普通\" : \"无痛\");\n        }\n      }, {\n        title: '既往史',\n        dataIndex: 'history',\n        key: 'history',\n        render: function render(a, b, c) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }, historys.find(function (v) {\n            return v.value == b.history;\n          }).label);\n        }\n      }, {\n        title: '过敏史',\n        dataIndex: 'allergy_history',\n        key: 'allergy_history'\n      }, {\n        title: '备注',\n        dataIndex: 'remark',\n        key: 'remark'\n      }, {\n        title: '创建时间',\n        dataIndex: 'create_time',\n        key: 'create_time',\n        render: function render(a, b, c) {\n          return React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120\n            },\n            __self: this\n          }, moment(b.create_time).format(\"YYYY-MM-DD HH:mm:ss\"));\n        }\n      }];\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          height: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), \"\\xA0\\xA0\", React.createElement(_Input, {\n        placeholder: \"\\u59D3\\u540D\",\n        style: {\n          width: 200\n        },\n        value: searchs.name,\n        onChange: function onChange(e) {\n          searchs.name = e.target.value;\n\n          _this2.setState({\n            searchs: searchs\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), \"\\xA0\\xA0\", React.createElement(_Input, {\n        placeholder: \"\\u624B\\u673A\\u53F7\",\n        style: {\n          width: 200\n        },\n        value: searchs.phone,\n        onChange: function onChange(e) {\n          searchs.phone = e.target.value;\n\n          _this2.setState({\n            searchs: searchs\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), \"\\xA0\\xA0\", React.createElement(_DatePicker, {\n        style: {\n          width: 200\n        },\n        placeholder: \"\\u9884\\u7EA6\\u65E5\\u671F\",\n        onChange: function onChange(date, dateString) {\n          searchs.appointment_date = dateString;\n\n          _this2.setState({\n            searchs: searchs\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), \"\\xA0\\xA0\", React.createElement(_Select, {\n        defaultValue: 0,\n        placeholder: \"\\u6027\\u522B\",\n        style: {\n          width: 120\n        },\n        onChange: function onChange(v) {\n          searchs.sex = v;\n\n          _this2.setState({\n            searchs: searchs\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Option, {\n        value: 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"\\u5168\\u90E8\\u6027\\u522B\"), React.createElement(Option, {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"\\u7537\"), React.createElement(Option, {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"\\u5973\")), \"\\xA0\\xA0\", React.createElement(_Select, {\n        defaultValue: 0,\n        style: {\n          width: 120\n        },\n        onChange: function onChange(v) {\n          searchs.time_bucket = v;\n\n          _this2.setState({\n            searchs: searchs\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Option, {\n        value: 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"\\u5168\\u90E8\\u65F6\\u95F4\\u6BB5\"), React.createElement(Option, {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"\\u4E0A\\u5348\"), React.createElement(Option, {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"\\u4E0B\\u5348\")), \"\\xA0\\xA0\", React.createElement(_Select, {\n        defaultValue: 0,\n        style: {\n          width: 120\n        },\n        onChange: function onChange(v) {\n          searchs.check_method = v;\n\n          _this2.setState({\n            searchs: searchs\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Option, {\n        value: 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"\\u5168\\u90E8\\u68C0\\u67E5\\u65B9\\u5F0F\"), React.createElement(Option, {\n        value: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"\\u666E\\u901A\"), React.createElement(Option, {\n        value: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"\\u65E0\\u75DB\")), \"\\xA0\\xA0\", React.createElement(_Button, {\n        onClick:\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3() {\n          var searchs;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  searchs = _this2.state.searchs;\n                  searchs.page = 1;\n                  _context3.next = 4;\n                  return _this2.loadList(searchs);\n\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"\\u641C\\u7D22\"), React.createElement(\"div\", {\n        style: {\n          height: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(_Table, {\n        rowKey: \"id\",\n        pagination: {\n          pageSize: data.size,\n          total: data.total,\n          current: searchs.page,\n          onChange: function () {\n            var _onChange = _asyncToGenerator(\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee4(page) {\n              var searchs;\n              return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                  switch (_context4.prev = _context4.next) {\n                    case 0:\n                      searchs = _this2.state.searchs;\n                      searchs.page = page;\n                      _context4.next = 4;\n                      return _this2.loadList(searchs);\n\n                    case 4:\n                    case \"end\":\n                      return _context4.stop();\n                  }\n                }\n              }, _callee4);\n            }));\n\n            function onChange(_x2) {\n              return _onChange.apply(this, arguments);\n            }\n\n            return onChange;\n          }()\n        },\n        dataSource: data.list,\n        loading: loading,\n        columns: columns,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(_ref2) {\n        var req, query, jsonPageRes, userAgent;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                req = _ref2.req, query = _ref2.query, jsonPageRes = _ref2.jsonPageRes;\n                userAgent = req ? req.headers['user-agent'] : navigator.userAgent;\n                return _context5.abrupt(\"return\", {\n                  userAgent: userAgent,\n                  query: query,\n                  jsonPageRes: jsonPageRes\n                });\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function getInitialProps(_x3) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/justin/Desktop/private/admin_jg/pages/admin.js"],"names":["Layout","checkProjects","historys","moment","Axios","queryString","Option","loading","data","list","searchs","name","sex","page","time_bucket","check_method","phone","appointment_date","serachParam","setState","get","stringify","res","console","log","loadList","state","columns","title","dataIndex","key","render","a","b","c","age","find","v","value","check_project","label","history","create_time","format","height","width","e","target","date","dateString","pageSize","size","total","current","onChange","req","query","jsonPageRes","userAgent","headers","navigator","React","Component"],"mappings":"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","sourcesContent":["import Layout from '../components/layout'\nimport {Radio,Table,Input,Button,Select,DatePicker} from 'antd'\nimport {checkProjects,historys} from '../utils/config'\nimport moment from \"moment\"\nimport Axios from 'axios';\nimport queryString from 'query-string';\nconst { Option } = Select;\nexport default class extends React.Component {\n  static async getInitialProps({ req,query,jsonPageRes }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent,query,jsonPageRes }\n  }\n  state = {\n    loading:true,\n    data:{\n      list:[]\n    },\n    searchs:{\n      name:\"\",\n      sex:0,\n      page:1,\n      time_bucket:0,\n      check_method:0,\n      phone:\"\",\n      appointment_date:\"\"\n    }\n  }\n\n  async loadList(serachParam){\n    this.setState({loading:true})\n    let res = await Axios.get(`http://localhost:29001/jg/appointment/list?${queryString.stringify(serachParam)}`)\n    console.log(res);\n    this.setState({data:res.data,loading:false})\n  }\n\n  async componentDidMount(){\n     await this.loadList();\n  }\n \n\n\n \n\n  render() {\n    let {data,searchs,loading} = this.state;\n    const columns = [\n      {\n        title: '姓名',\n        dataIndex: 'name',\n        key: 'name',\n      },\n      {\n        title: '性别',\n        dataIndex: 'sex',\n        key: 'sex',\n        render:(a,b,c)=>{\n          return <span>{b.sex == 1 ? \"男\":\"女\"}</span>\n        }\n      },\n      {\n        title: '年龄',\n        dataIndex: 'age',\n        key: 'age',\n        render:(a,b,c)=>{\n          return <span>{b.age}岁</span>\n        }\n      },\n      {\n        title: '手机号',\n        dataIndex: 'phone',\n        key: 'phone',\n      },\n      {\n        title: '预约时间',\n        dataIndex: 'appointment_date',\n        key: 'appointment_date',\n        render:(a,b,c)=>{\n           return <span>{b.appointment_date} {b.time_bucket == 1 ? \"上午\":\"下午\"}</span>\n        }\n      },\n      {\n        title: '检查项目',\n        dataIndex: 'check_project',\n        key: 'check_project',\n        render:(a,b,c)=>{\n           return <span>{checkProjects.find((v)=>{return v.value == b.check_project}).label}</span>\n        }\n      },\n      {\n        title: '检查方式',\n        dataIndex: 'check_method',\n        key: 'check_method',\n        render:(a,b,c)=>{\n           return <span>{b.check_method == 1 ? \"普通\":\"无痛\"}</span>\n        }\n      },\n      {\n        title: '既往史',\n        dataIndex: 'history',\n        key: 'history',\n        render:(a,b,c)=>{\n           return <span>{historys.find((v)=>{return v.value == b.history}).label}</span>\n        }\n      },\n      {\n        title: '过敏史',\n        dataIndex: 'allergy_history',\n        key: 'allergy_history'\n      },\n      {\n        title: '备注',\n        dataIndex: 'remark',\n        key: 'remark'\n      },\n      {\n        title: '创建时间',\n        dataIndex: 'create_time',\n        key: 'create_time',\n        render:(a,b,c)=>{\n           return <span>{moment(b.create_time).format(\"YYYY-MM-DD HH:mm:ss\")}</span>\n        }\n      }\n      \n      \n    ];\n    return (\n      <div>\n        <div style={{height:15}}></div>\n          &nbsp;&nbsp; \n          <Input placeholder=\"姓名\" style={{width:200}} value={searchs.name} onChange={(e)=>{\n            searchs.name = e.target.value;\n            this.setState({searchs})\n          }} />\n          &nbsp;&nbsp;\n          <Input placeholder=\"手机号\" style={{width:200}} value={searchs.phone} onChange={(e)=>{\n            searchs.phone = e.target.value;\n            this.setState({searchs})\n          }} />\n          &nbsp;&nbsp;\n          <DatePicker style={{width:200}} placeholder=\"预约日期\" onChange={(date, dateString)=>{\n              searchs.appointment_date = dateString;\n              this.setState({searchs})\n          }} />\n          &nbsp;&nbsp;\n          <Select defaultValue={0} placeholder=\"性别\" style={{ width: 120 }} onChange={(v)=>{\n              searchs.sex = v;\n              this.setState({searchs})\n          }}>\n            <Option value={0}>全部性别</Option>\n            <Option value={1}>男</Option>\n            <Option value={2}>女</Option>\n          </Select>\n          &nbsp;&nbsp; \n          <Select defaultValue={0} style={{ width: 120 }} onChange={(v)=>{\n              searchs.time_bucket = v;\n              this.setState({searchs})\n          }}>\n            <Option value={0}>全部时间段</Option>\n            <Option value={1}>上午</Option>\n            <Option value={2}>下午</Option>\n          </Select>\n          &nbsp;&nbsp; \n          <Select defaultValue={0} style={{ width: 120 }} onChange={(v)=>{\n              searchs.check_method = v;\n              this.setState({searchs})\n          }}>\n            <Option value={0}>全部检查方式</Option>\n            <Option value={1}>普通</Option>\n            <Option value={2}>无痛</Option>\n          </Select>\n          &nbsp;&nbsp;\n          <Button onClick={async ()=>{\n            let {searchs} = this.state;\n            searchs.page = 1\n            await this.loadList(searchs)\n          }}>搜索</Button>\n        <div style={{height:15}}></div>\n        <Table rowKey={`id`} pagination={{\n            pageSize:data.size,\n            total:data.total,\n            current:searchs.page,\n            onChange:async (page)=>{\n              let {searchs} = this.state;\n              searchs.page = page\n              await this.loadList(searchs)\n            }\n        }} dataSource={data.list} loading={loading} columns={columns} />\n      </div>\n      \n    )\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}